<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>UI Configurator — Live Preview</title>

    <style>
      :root {
        --color-primary: #4a78ff;
        --color-secondary: #335bef;
        --color-text: #222222;
        --color-bg: #ffffff;
        --border-radius: 8px;
        --spacing-small: 8px;
        --spacing-medium: 16px;
        --spacing-large: 24px;
        --font-base: 16px;
        --panel-bg: #ffffff;
        --muted: #777;
      }

      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        background: #e8e8e8;
        color: var(--color-text);
      }

      #layout {
        display: grid;
        grid-template-columns: 260px 1fr 260px;
        height: calc(100vh - 80px);
        gap: 12px;
        padding: 12px;
      }

      #sidebar-left,
      #sidebar-right,
      #center-preview {
        background: var(--panel-bg);
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        overflow-y: auto;
      }

      header {
        background: var(--panel-bg);
        padding: 16px 24px;
        margin-bottom: 12px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        border-radius: 0 0 12px 12px;
      }
      header h1 {
        margin: 0;
        font-size: 18px;
      }

      details {
        margin-bottom: 16px;
        padding: 8px 12px;
        border: 2px solid #ccc;
        border-radius: 8px;
        background: var(--panel-bg);
      }

      summary {
        font-weight: bold;
        cursor: pointer;
        padding-left: 24px;
        display: block;
        position: relative;
        margin-bottom: 16px;
      }

      summary::before {
        content: "";
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 6px 0 6px 4px;
        border-color: transparent transparent transparent var(--color-text);
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        transition: transform 0.2s ease;
      }

      details[open] summary::before {
        transform: translateY(-50%) rotate(90deg);
      }

      #preview-area {
        flex: 1;
        border: 2px dashed #ccc;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--panel-bg);
        min-height: 200px;
        font-size: 18px;
        color: var(--muted);
        padding: 20px;
      }

      .prop-group,
      .comp-group,
      .token-group {
        margin-bottom: 16px;
        display: flex;
        flex-direction: column;
      }

      #sidebar-left label,
      #sidebar-right label {
        font-size: 14px;
        font-weight: normal;
        margin-bottom: 6px;
        color: #222;
      }

      #sidebar-left input[type="text"],
      #sidebar-left select,
      #sidebar-right input[type="text"],
      #sidebar-right select {
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
        width: 100%;
        background: #fff;
        font-size: 14px;
      }

      #sidebar-left input[type="color"],
      #sidebar-left input[type="range"],
      #sidebar-right input[type="color"],
      #sidebar-right input[type="range"] {
        margin-top: 0;
        margin-bottom: 0;
      }

      input[type="range"] {
        width: 100%;
      }

      .value-display {
        font-size: 12px;
        color: #555;
        margin-top: 4px;
      }

      #sidebar-right button {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: none;
        border-radius: 8px;
        background: var(--color-primary);
        color: white;
        font-size: 15px;
        cursor: pointer;
        transition: background 0.18s ease, transform 0.08s ease;
      }
      #sidebar-right button:hover {
        background: var(--color-secondary);
      }
      #sidebar-right button:active {
        transform: translateY(0);
      }

      .preview-component {
        transition: all 160ms ease;
      }
      .preview-button {
        background: var(--color-primary);
        color: var(--color-bg);
        border: none;
        border-radius: var(--border-radius);
        padding: calc(var(--spacing-small) * 0.8) var(--spacing-medium);
        font-size: var(--font-base);
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(34, 34, 34, 0.06);
      }
      .preview-button.outlined {
        background: transparent;
        color: var(--color-primary);
        border: 1px solid var(--color-primary);
      }
      .preview-button.secondary {
        background: var(--color-secondary);
        color: var(--color-bg);
      }

      .preview-card {
        --card-bg: var(--color-bg);
        --card-contrast: rgba(34, 34, 34, 0.06);
        background: var(--card-bg);
        color: var(--color-text);
        border-radius: calc(var(--border-radius) * 1);
        padding: 0;
        max-width: 460px;
        width: 100%;
        box-shadow: 0 8px 30px var(--card-contrast);
        border: 1px solid rgba(0, 0, 0, 0.04);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transition: box-shadow 0.14s ease;
      }

      .preview-header {
        display: block;
        width: 100%;
        padding: var(--spacing-small) var(--spacing-medium);
        background: var(--color-primary, #4a78ff);
        color: var(--color-bg, #fff);
        border-radius: 8px;
        text-align: center;
        font-weight: 700;
        font-size: 18px;
      }

      .preview-nav {
        display: flex;
        gap: var(--spacing-medium);
        list-style: none;
        padding: 0;
        margin: 0;
        align-items: center;
      }
      .preview-nav a {
        text-decoration: none;
        color: var(--color-text);
        padding: calc(var(--spacing-small) / 2) var(--spacing-small);
        border-radius: calc(var(--border-radius) / 1.6);
        font-weight: 600;
      }

      .size-small {
        font-size: 13px;
        padding: 6px 10px;
      }
      .size-medium {
        font-size: 16px;
        padding: 10px 14px;
      }
      .size-large {
        font-size: 20px;
        padding: 14px 20px;
      }

      button:focus,
      input:focus,
      select:focus,
      a:focus {
        outline: 3px solid rgba(74, 120, 255, 0.18);
        outline-offset: 2px;
      }

      .kv {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
      }
    </style>
  </head>
  <body>
    <header><h1>UI Configurator — Live Preview</h1></header>

    <main id="layout">
      <aside id="sidebar-left">
        <h2>Configuration</h2>

        <details open>
          <summary>Component</summary>

          <div class="comp-group">
            <label for="component-select">Choose Component</label>
            <select id="component-select">
              <option value="button">Button</option>
              <option value="card">Card</option>
              <option value="header">Header</option>
              <option value="navigation">Navigation</option>
            </select>
          </div>

          <div class="comp-group">
            <label for="component-variant">Variant / Style</label>
            <select id="component-variant">
              <option value="default">Default</option>
              <option value="primary">Primary</option>
              <option value="secondary">Secondary</option>
              <option value="outlined">Outlined</option>
            </select>
          </div>

          <div class="comp-group">
            <label for="component-size">Size</label>
            <select id="component-size">
              <option value="small">Small</option>
              <option value="medium" selected>Medium</option>
              <option value="large">Large</option>
            </select>
          </div>
        </details>

        <details open>
          <summary>Properties</summary>

          <div class="prop-group">
            <label for="prop-text">Label Text</label>
            <input
              id="prop-text"
              type="text"
              placeholder="Enter text..."
              value="Enter text..."
            />
          </div>

          <div class="prop-group">
            <label for="prop-font-size">Font Size</label>
            <input
              id="prop-font-size"
              type="range"
              min="8"
              max="48"
              value="16"
            />
            <span class="value-display" id="font-size-value">16px</span>
          </div>

          <div class="prop-group">
            <label for="prop-padding">Padding</label>
            <input id="prop-padding" type="range" min="0" max="80" value="10" />
            <span class="value-display" id="padding-value">10px</span>
          </div>

          <div class="prop-group">
            <label for="prop-radius">Border Radius</label>
            <input id="prop-radius" type="range" min="0" max="80" value="8" />
            <span class="value-display" id="radius-value">8px</span>
          </div>

          <div class="prop-group">
            <label for="prop-font-family">Font Family</label>
            <select id="prop-font-family">
              <option value="system-ui">System UI</option>
              <option value="Arial">Arial</option>
              <option value="Roboto">Roboto</option>
              <option value="Inter">Inter</option>
              <option value="Georgia">Georgia</option>
            </select>
          </div>

          <div class="prop-group">
            <label for="prop-bg-color">Background Color (component)</label>
            <input id="prop-bg-color" type="color" value="#4a78ff" />
          </div>

          <div class="prop-group">
            <label for="prop-text-color">Text Color (component)</label>
            <input id="prop-text-color" type="color" value="#ffffff" />
          </div>
        </details>

        <details>
          <summary>Design Tokens</summary>

          <div class="token-group">
            <label for="token-primary-color">Primary Color</label>
            <input type="color" id="token-primary-color" value="#4a78ff" />
          </div>

          <div class="token-group">
            <label for="token-secondary-color">Secondary Color</label>
            <input type="color" id="token-secondary-color" value="#335bef" />
          </div>

          <div class="token-group">
            <label for="token-text-color">Text Color</label>
            <input type="color" id="token-text-color" value="#222222" />
          </div>

          <div class="token-group">
            <label for="token-bg-color">Background Color</label>
            <input type="color" id="token-bg-color" value="#ffffff" />
          </div>

          <div class="token-group">
            <label for="token-border-radius">Border Radius</label>
            <input
              type="range"
              id="token-border-radius"
              min="0"
              max="80"
              value="8"
            />
            <span class="value-display" id="token-border-radius-value"
              >8px</span
            >
          </div>

          <div class="token-group">
            <label for="token-spacing-small">Small Spacing</label>
            <input
              type="range"
              id="token-spacing-small"
              min="0"
              max="40"
              value="8"
            />
            <span class="value-display" id="token-spacing-small-value"
              >8px</span
            >
          </div>

          <div class="token-group">
            <label for="token-spacing-medium">Medium Spacing</label>
            <input
              type="range"
              id="token-spacing-medium"
              min="0"
              max="80"
              value="16"
            />
            <span class="value-display" id="token-spacing-medium-value"
              >16px</span
            >
          </div>

          <div class="token-group">
            <label for="token-spacing-large">Large Spacing</label>
            <input
              type="range"
              id="token-spacing-large"
              min="0"
              max="120"
              value="24"
            />
            <span class="value-display" id="token-spacing-large-value"
              >24px</span
            >
          </div>
        </details>
      </aside>

      <section id="center-preview">
        <div id="preview-area">Preview will appear here…</div>
      </section>

      <aside id="sidebar-right">
        <h2>Actions</h2>
        <button id="export-css">Export CSS</button>
        <button id="export-json">Export JSON</button>
        <button id="undo-btn">Undo</button>
        <button id="redo-btn">Redo</button>
        <button id="reset-btn">Reset</button>
      </aside>
    </main>

    <script>
      (function () {
        const previewArea = document.getElementById("preview-area");

        const compSelect = document.getElementById("component-select");
        const compVariant = document.getElementById("component-variant");
        const compSize = document.getElementById("component-size");

        const propText = document.getElementById("prop-text");
        const propFontSize = document.getElementById("prop-font-size");
        const propPadding = document.getElementById("prop-padding");
        const propRadius = document.getElementById("prop-radius");
        const propFontFamily = document.getElementById("prop-font-family");
        const propBgColor = document.getElementById("prop-bg-color");
        const propTextColor = document.getElementById("prop-text-color");

        const fontSizeValue = document.getElementById("font-size-value");
        const paddingValue = document.getElementById("padding-value");
        const radiusValue = document.getElementById("radius-value");

        const tokenPrimary = document.getElementById("token-primary-color");
        const tokenSecondary = document.getElementById("token-secondary-color");
        const tokenText = document.getElementById("token-text-color");
        const tokenBg = document.getElementById("token-bg-color");
        const tokenRadius = document.getElementById("token-border-radius");
        const tokenRadiusValue = document.getElementById(
          "token-border-radius-value"
        );
        const tokenSpacingSmall = document.getElementById(
          "token-spacing-small"
        );
        const tokenSpacingSmallValue = document.getElementById(
          "token-spacing-small-value"
        );
        const tokenSpacingMedium = document.getElementById(
          "token-spacing-medium"
        );
        const tokenSpacingMediumValue = document.getElementById(
          "token-spacing-medium-value"
        );
        const tokenSpacingLarge = document.getElementById(
          "token-spacing-large"
        );
        const tokenSpacingLargeValue = document.getElementById(
          "token-spacing-large-value"
        );

        const resetBtn = document.getElementById("reset-btn");
        const exportCSSBtn = document.getElementById("export-css");
        const exportJSONBtn = document.getElementById("export-json");

        let currentEl = null;

        function setRootVar(name, value) {
          document.documentElement.style.setProperty(name, value);
        }

        function px(v) {
          return v + "px";
        }

        function createButton({ text, variant, size } = {}) {
          const btn = document.createElement("button");
          btn.className = "preview-button preview-component";
          if (variant) {
            if (variant === "outlined") btn.classList.add("outlined");
            else if (variant === "secondary") btn.classList.add("secondary");
            else btn.classList.add("primary");
          }
          if (size) btn.classList.add("size-" + size);
          btn.textContent = text || "Button";
          return btn;
        }

        function createCard({ title, body } = {}) {
          const card = document.createElement("div");
          card.className = "preview-card preview-component";
          const h = document.createElement("h3");
          h.textContent = title || "Card Title";
          const p = document.createElement("p");
          p.textContent = body || "Card body text goes here.";
          card.appendChild(h);
          card.appendChild(p);
          return card;
        }

        function createHeader({ text } = {}) {
          const header = document.createElement("header");
          header.className = "preview-header preview-component";
          header.textContent = text || "Page Title";
          return header;
        }

        function createNav() {
          const ul = document.createElement("ul");
          ul.className = "preview-nav preview-component";
          ["Home", "About", "Contact"].forEach((label) => {
            const a = document.createElement("a");
            a.href = "#";
            a.textContent = label;
            const li = document.createElement("li");
            li.appendChild(a);
            ul.appendChild(li);
          });
          return ul;
        }

        function renderComponent() {
          previewArea.innerHTML = "";

          const type = compSelect.value;
          const variant = compVariant.value;
          const size = compSize.value;

          let el;
          if (type === "button")
            el = createButton({
              text: propText.value || "Enter text...",
              variant,
              size,
            });
          else if (type === "card")
            el = createCard({
              title: propText.value || "Enter text...",
              body: "Example content...",
            });
          else if (type === "header")
            el = createHeader({ text: propText.value || "Enter text..." });
          else if (type === "navigation") el = createNav();
          else el = document.createElement("div");

          el = applyPropertiesToElement(el);
          previewArea.appendChild(el);
          currentEl = el;
        }

        function applyPropertiesToElement(el) {
          el.style.fontSize = px(propFontSize.value);
          fontSizeValue.textContent = propFontSize.value + "px";

          if (propPadding) {
            el.style.padding = px(propPadding.value);
            paddingValue.textContent = propPadding.value + "px";
          }

          el.style.borderRadius = px(propRadius.value);
          radiusValue.textContent = propRadius.value + "px";

          if (propFontFamily && propFontFamily.value)
            el.style.fontFamily = propFontFamily.value;

          if (propBgColor && propBgColor.value)
            el.style.background = propBgColor.value;
          if (propTextColor && propTextColor.value)
            el.style.color = propTextColor.value;

          return el;
        }

        function initTokens() {
          setRootVar("--color-primary", tokenPrimary.value);
          setRootVar("--color-secondary", tokenSecondary.value);
          setRootVar("--color-text", tokenText.value);
          setRootVar("--color-bg", tokenBg.value);
          setRootVar("--border-radius", px(tokenRadius.value));
          setRootVar("--spacing-small", px(tokenSpacingSmall.value));
          setRootVar("--spacing-medium", px(tokenSpacingMedium.value));
          setRootVar("--spacing-large", px(tokenSpacingLarge.value));

          tokenRadiusValue.textContent = px(tokenRadius.value);
          tokenSpacingSmallValue.textContent = px(tokenSpacingSmall.value);
          tokenSpacingMediumValue.textContent = px(tokenSpacingMedium.value);
          tokenSpacingLargeValue.textContent = px(tokenSpacingLarge.value);
        }

        function attachTokenListeners() {
          tokenPrimary.addEventListener("input", (e) =>
            setRootVar("--color-primary", e.target.value)
          );
          tokenSecondary.addEventListener("input", (e) =>
            setRootVar("--color-secondary", e.target.value)
          );
          tokenText.addEventListener("input", (e) =>
            setRootVar("--color-text", e.target.value)
          );
          tokenBg.addEventListener("input", (e) =>
            setRootVar("--color-bg", e.target.value)
          );

          tokenRadius.addEventListener("input", (e) => {
            setRootVar("--border-radius", px(e.target.value));
            tokenRadiusValue.textContent = px(e.target.value);
          });

          tokenSpacingSmall.addEventListener("input", (e) => {
            setRootVar("--spacing-small", px(e.target.value));
            tokenSpacingSmallValue.textContent = px(e.target.value);
          });

          tokenSpacingMedium.addEventListener("input", (e) => {
            setRootVar("--spacing-medium", px(e.target.value));
            tokenSpacingMediumValue.textContent = px(e.target.value);
          });

          tokenSpacingLarge.addEventListener("input", (e) => {
            setRootVar("--spacing-large", px(e.target.value));
            tokenSpacingLargeValue.textContent = px(e.target.value);
          });
        }

        function attachPropertyListeners() {
          propText.addEventListener("input", () => {
            if (currentEl) {
              if (
                currentEl.tagName.toLowerCase() === "button" ||
                currentEl.classList.contains("preview-header")
              ) {
                currentEl.textContent = propText.value;
              } else if (currentEl.classList.contains("preview-card")) {
                const h = currentEl.querySelector("h3");
                if (h) h.textContent = propText.value;
              }
            }
          });

          propFontSize.addEventListener("input", () => {
            if (currentEl) currentEl.style.fontSize = px(propFontSize.value);
            fontSizeValue.textContent = propFontSize.value + "px";
          });

          propPadding.addEventListener("input", () => {
            if (currentEl) currentEl.style.padding = px(propPadding.value);
            paddingValue.textContent = propPadding.value + "px";
          });

          propRadius.addEventListener("input", () => {
            if (currentEl) currentEl.style.borderRadius = px(propRadius.value);
            radiusValue.textContent = propRadius.value + "px";
          });

          propFontFamily.addEventListener("change", () => {
            if (currentEl) currentEl.style.fontFamily = propFontFamily.value;
          });

          propBgColor.addEventListener("input", () => {
            if (currentEl) currentEl.style.background = propBgColor.value;
          });

          propTextColor.addEventListener("input", () => {
            if (currentEl) currentEl.style.color = propTextColor.value;
          });
        }

        function attachComponentListeners() {
          compSelect.addEventListener("change", () => renderComponent());
          compVariant.addEventListener("change", () => renderComponent());
          compSize.addEventListener("change", () => renderComponent());
        }

        resetBtn.addEventListener("click", () => {
          tokenPrimary.value = "#4a78ff";
          tokenSecondary.value = "#335bef";
          tokenText.value = "#222222";
          tokenBg.value = "#ffffff";
          tokenRadius.value = 8;
          tokenSpacingSmall.value = 8;
          tokenSpacingMedium.value = 16;
          tokenSpacingLarge.value = 24;

          initTokens();

          propText.value = "Enter text...";
          propFontSize.value = 16;
          propPadding.value = 10;
          propRadius.value = 8;
          propFontFamily.value = "system-ui";
          propBgColor.value = "#4a78ff";
          propTextColor.value = "#ffffff";

          renderComponent();
        });

        exportCSSBtn.addEventListener("click", () => {
          const css = `
:root {
  --color-primary: ${tokenPrimary.value};
  --color-secondary: ${tokenSecondary.value};
  --color-text: ${tokenText.value};
  --color-bg: ${tokenBg.value};
  --border-radius: ${tokenRadius.value}px;
  --spacing-small: ${tokenSpacingSmall.value}px;
  --spacing-medium: ${tokenSpacingMedium.value}px;
  --spacing-large: ${tokenSpacingLarge.value}px;
}
`;
          copyToClipboard(css);
          alert("CSS variables copied to clipboard.");
        });

        exportJSONBtn.addEventListener("click", () => {
          const json = {
            tokens: {
              colorPrimary: tokenPrimary.value,
              colorSecondary: tokenSecondary.value,
              colorText: tokenText.value,
              colorBg: tokenBg.value,
              borderRadius: tokenRadius.value,
              spacingSmall: tokenSpacingSmall.value,
              spacingMedium: tokenSpacingMedium.value,
              spacingLarge: tokenSpacingLarge.value,
            },
          };
          copyToClipboard(JSON.stringify(json, null, 2));
          alert("JSON copied to clipboard.");
        });

        function copyToClipboard(text) {
          navigator.clipboard?.writeText(text).catch(() => {});
        }

        function init() {
          initTokens();
          attachTokenListeners();
          attachPropertyListeners();
          attachComponentListeners();
          renderComponent();
        }

        init();
      })();
    </script>
  </body>
</html>
