<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>UI Configurator — Live Preview</title>

    <style>
      :root {
        --color-primary: #4a78ff;
        --color-secondary: #335bef;
        --color-text: #222222;
        --color-bg: #ffffff;
        --border-radius: 8px;
        --spacing-small: 8px;
        --spacing-medium: 16px;
        --spacing-large: 24px;
        --font-base: 16px;
        --panel-bg: #ffffff;
        --muted: #777;
      }

      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        background: #e8e8e8;
        color: var(--color-text);
      }

      #layout {
        display: grid;
        grid-template-columns: 260px 1fr 260px;
        height: calc(100vh - 80px);
        gap: 12px;
        padding: 12px;
      }

      #sidebar-left,
      #sidebar-right,
      #center-preview {
        background: var(--panel-bg);
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        overflow-y: auto;
      }

      header {
        background: var(--panel-bg);
        padding: 16px 24px;
        margin-bottom: 12px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        border-radius: 0 0 12px 12px;
      }
      header h1 {
        margin: 0;
        font-size: 18px;
      }

      details {
        margin-bottom: 16px;
        padding: 8px 12px;
        border: 2px solid #ccc;
        border-radius: 8px;
        background: var(--panel-bg);
      }

      summary {
        font-weight: bold;
        cursor: pointer;
        padding-left: 24px;
        display: block;
        position: relative;
        margin-bottom: 16px;
      }

      summary::before {
        content: "";
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 6px 0 6px 4px;
        border-color: transparent transparent transparent var(--color-text);
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        transition: transform 0.2s ease;
      }

      details[open] summary::before {
        transform: translateY(-50%) rotate(90deg);
      }

      #preview-area {
        flex: 1;
        border: 2px dashed #ccc;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--panel-bg);
        min-height: 200px;
        font-size: 18px;
        color: var(--muted);
        padding: 20px;
      }

      .prop-group,
      .comp-group,
      .token-group {
        margin-bottom: 16px;
        display: flex;
        flex-direction: column;
      }

      #sidebar-left label,
      #sidebar-right label {
        font-size: 14px;
        font-weight: normal;
        margin-bottom: 6px;
        color: #222;
      }

      #sidebar-left input[type="text"],
      #sidebar-left select,
      #sidebar-right input[type="text"],
      #sidebar-right select {
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
        width: 100%;
        background: #fff;
        font-size: 14px;
      }

      #sidebar-left input[type="color"],
      #sidebar-left input[type="range"],
      #sidebar-right input[type="color"],
      #sidebar-right input[type="range"] {
        margin-top: 0;
        margin-bottom: 0;
      }

      input[type="range"] {
        width: 100%;
      }

      .value-display {
        font-size: 12px;
        color: #555;
        margin-top: 4px;
      }

      #sidebar-right button {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: none;
        border-radius: 8px;
        background: var(--color-primary);
        color: white;
        font-size: 15px;
        cursor: pointer;
        transition: background 0.18s ease, transform 0.08s ease;
      }
      #sidebar-right button:hover {
        background: var(--color-secondary);
      }
      #sidebar-right button:active {
        transform: translateY(0);
      }

      .preview-component {
        transition: all 160ms ease;
      }
      .preview-button {
        background: var(--color-primary);
        color: var(--color-bg);
        border: none;
        border-radius: var(--border-radius);
        padding: calc(var(--spacing-small) * 0.8) var(--spacing-medium);
        font-size: var(--font-base);
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(34, 34, 34, 0.06);
      }
      .preview-button.outlined {
        background: transparent;
        color: var(--color-primary);
        border: 1px solid var(--color-primary);
      }
      .preview-button.secondary {
        background: var(--color-secondary);
        color: var(--color-bg);
      }

      .preview-card {
        --card-bg: var(--color-bg);
        --card-contrast: rgba(34, 34, 34, 0.06);
        background: var(--card-bg);
        color: var(--color-text);
        border-radius: calc(var(--border-radius) * 1);
        padding: 0;
        max-width: 460px;
        width: 100%;
        box-shadow: 0 8px 30px var(--card-contrast);
        border: 1px solid rgba(0, 0, 0, 0.04);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transition: box-shadow 0.14s ease;
      }

      .preview-header {
        display: block;
        width: 100%;
        padding: var(--spacing-small) var(--spacing-medium);
        background: var(--color-primary, #4a78ff);
        color: var(--color-bg, #fff);
        border-radius: 8px;
        text-align: center;
        font-weight: 700;
        font-size: 18px;
      }

      .preview-nav {
        display: flex;
        gap: var(--spacing-medium);
        list-style: none;
        padding: 0;
        margin: 0;
        align-items: center;
      }
      .preview-nav a {
        text-decoration: none;
        color: var(--color-text);
        padding: calc(var(--spacing-small) / 2) var(--spacing-small);
        border-radius: calc(var(--border-radius) / 1.6);
        font-weight: 600;
      }

      .size-small {
        font-size: 13px;
        padding: 6px 10px;
      }
      .size-medium {
        font-size: 16px;
        padding: 10px 14px;
      }
      .size-large {
        font-size: 20px;
        padding: 14px 20px;
      }

      button:focus,
      input:focus,
      select:focus,
      a:focus {
        outline: 3px solid rgba(74, 120, 255, 0.18);
        outline-offset: 2px;
      }

      .kv {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
      }
    </style>
  </head>
  <body>
    <header><h1>UI Configurator — Live Preview</h1></header>

    <main id="layout">
      <aside id="sidebar-left">
        <h2>Configuration</h2>

        <details open>
          <summary>Component</summary>

          <div class="comp-group">
            <label for="component-select">Choose Component</label>
            <select id="component-select">
              <option value="button">Button</option>
              <option value="card">Card</option>
              <option value="header">Header</option>
              <option value="navigation">Navigation</option>
            </select>
          </div>

          <div class="comp-group">
            <label for="component-variant">Variant / Style</label>
            <select id="component-variant">
              <option value="default">Default</option>
              <option value="primary">Primary</option>
              <option value="secondary">Secondary</option>
              <option value="outlined">Outlined</option>
            </select>
          </div>

          <div class="comp-group">
            <label for="component-size">Size</label>
            <select id="component-size">
              <option value="small">Small</option>
              <option value="medium" selected>Medium</option>
              <option value="large">Large</option>
            </select>
          </div>
        </details>

        <details open>
          <summary>Properties</summary>

          <div class="prop-group">
            <label for="prop-text">Label Text</label>
            <input
              id="prop-text"
              type="text"
              placeholder="Enter text..."
              value="Enter text..."
            />
          </div>

          <div class="prop-group">
            <label for="prop-font-size">Font Size</label>
            <input
              id="prop-font-size"
              type="range"
              min="8"
              max="48"
              value="16"
            />
            <span class="value-display" id="font-size-value">16px</span>
          </div>

          <div class="prop-group">
            <label for="prop-padding">Padding</label>
            <input id="prop-padding" type="range" min="0" max="80" value="10" />
            <span class="value-display" id="padding-value">10px</span>
          </div>

          <div class="prop-group">
            <label for="prop-radius">Border Radius</label>
            <input id="prop-radius" type="range" min="0" max="80" value="8" />
            <span class="value-display" id="radius-value">8px</span>
          </div>

          <div class="prop-group">
            <label for="prop-font-family">Font Family</label>
            <select id="prop-font-family">
              <option value="system-ui">System UI</option>
              <option value="Arial">Arial</option>
              <option value="Roboto">Roboto</option>
              <option value="Inter">Inter</option>
              <option value="Georgia">Georgia</option>
            </select>
          </div>

          <div class="prop-group">
            <label for="prop-bg-color">Background Color (component)</label>
            <input id="prop-bg-color" type="color" value="#4a78ff" />
          </div>

          <div class="prop-group">
            <label for="prop-text-color">Text Color (component)</label>
            <input id="prop-text-color" type="color" value="#ffffff" />
          </div>
        </details>

        <details>
          <summary>Design Tokens</summary>

          <div class="token-group">
            <label for="token-primary-color">Primary Color</label>
            <input type="color" id="token-primary-color" value="#4a78ff" />
          </div>

          <div class="token-group">
            <label for="token-secondary-color">Secondary Color</label>
            <input type="color" id="token-secondary-color" value="#335bef" />
          </div>

          <div class="token-group">
            <label for="token-text-color">Text Color</label>
            <input type="color" id="token-text-color" value="#222222" />
          </div>

          <div class="token-group">
            <label for="token-bg-color">Background Color</label>
            <input type="color" id="token-bg-color" value="#ffffff" />
          </div>

          <div class="token-group">
            <label for="token-border-radius">Border Radius</label>
            <input
              type="range"
              id="token-border-radius"
              min="0"
              max="80"
              value="8"
            />
            <span class="value-display" id="token-border-radius-value"
              >8px</span
            >
          </div>

          <div class="token-group">
            <label for="token-spacing-small">Small Spacing</label>
            <input
              type="range"
              id="token-spacing-small"
              min="0"
              max="40"
              value="8"
            />
            <span class="value-display" id="token-spacing-small-value"
              >8px</span
            >
          </div>

          <div class="token-group">
            <label for="token-spacing-medium">Medium Spacing</label>
            <input
              type="range"
              id="token-spacing-medium"
              min="0"
              max="80"
              value="16"
            />
            <span class="value-display" id="token-spacing-medium-value"
              >16px</span
            >
          </div>

          <div class="token-group">
            <label for="token-spacing-large">Large Spacing</label>
            <input
              type="range"
              id="token-spacing-large"
              min="0"
              max="120"
              value="24"
            />
            <span class="value-display" id="token-spacing-large-value"
              >24px</span
            >
          </div>
        </details>
      </aside>

      <section id="center-preview">
        <div id="preview-area">Preview will appear here…</div>
      </section>

      <aside id="sidebar-right">
        <h2>Actions</h2>
        <button id="export-css">Export CSS</button>
        <button id="export-json">Export JSON</button>
        <button id="undo-btn">Undo</button>
        <button id="redo-btn">Redo</button>
        <button id="reset-btn">Reset</button>
      </aside>
    </main>

    <script>
      (function () {
        // --- DOM References ---
        const previewArea = document.getElementById("preview-area");

        const compSelect = document.getElementById("component-select");
        const compVariant = document.getElementById("component-variant");
        const compSize = document.getElementById("component-size");

        const propText = document.getElementById("prop-text");
        const propFontSize = document.getElementById("prop-font-size");
        const propPadding = document.getElementById("prop-padding");
        const propRadius = document.getElementById("prop-radius");
        const propFontFamily = document.getElementById("prop-font-family");
        const propBgColor = document.getElementById("prop-bg-color");
        const propTextColor = document.getElementById("prop-text-color");

        const fontSizeValue = document.getElementById("font-size-value");
        const paddingValue = document.getElementById("padding-value");
        const radiusValue = document.getElementById("radius-value");

        const tokenPrimary = document.getElementById("token-primary-color");
        const tokenSecondary = document.getElementById("token-secondary-color");
        const tokenText = document.getElementById("token-text-color");
        const tokenBg = document.getElementById("token-bg-color");
        const tokenRadius = document.getElementById("token-border-radius");
        const tokenRadiusValue = document.getElementById(
          "token-border-radius-value"
        );
        const tokenSpacingSmall = document.getElementById(
          "token-spacing-small"
        );
        const tokenSpacingSmallValue = document.getElementById(
          "token-spacing-small-value"
        );
        const tokenSpacingMedium = document.getElementById(
          "token-spacing-medium"
        );
        const tokenSpacingMediumValue = document.getElementById(
          "token-spacing-medium-value"
        );
        const tokenSpacingLarge = document.getElementById(
          "token-spacing-large"
        );
        const tokenSpacingLargeValue = document.getElementById(
          "token-spacing-large-value"
        );

        const resetBtn = document.getElementById("reset-btn");
        const exportCSSBtn = document.getElementById("export-css");
        const exportJSONBtn = document.getElementById("export-json");
        const undoBtn = document.getElementById("undo-btn");
        const redoBtn = document.getElementById("redo-btn");

        // --- Utility ---
        const px = (v) => v + "px";
        function setRootVar(name, value) {
          document.documentElement.style.setProperty(name, value);
        }

        // --- State ---
        let state = {
          component: "button",
          variant: "primary",
          size: "medium",
          text: "",
          fontSize: 16,
          padding: 10,
          radius: 8,
          fontFamily: "system-ui",
          bgColor: "#4a78ff",
          textColor: "#ffffff",
          tokens: {
            primary: "#4a78ff",
            secondary: "#335bef",
            text: "#222222",
            bg: "#ffffff",
            radius: 8,
            spacingSmall: 8,
            spacingMedium: 16,
            spacingLarge: 24,
          },
        };

        let undoStack = [];
        let redoStack = [];

        function pushSnapshot() {
          undoStack.push(JSON.parse(JSON.stringify(state)));
          if (undoStack.length > 300) undoStack.shift();
          redoStack = [];
          updateUndoRedoButtons();
        }

        function undo() {
          if (!undoStack.length) return;
          redoStack.push(JSON.parse(JSON.stringify(state)));
          state = undoStack.pop();
          renderFromState();
        }

        function redo() {
          if (!redoStack.length) return;
          undoStack.push(JSON.parse(JSON.stringify(state)));
          state = redoStack.pop();
          renderFromState();
        }

        function updateUndoRedoButtons() {
          if (undoBtn) undoBtn.disabled = undoStack.length === 0;
          if (redoBtn) redoBtn.disabled = redoStack.length === 0;
        }

        // --- Component creation ---
        function createButton({ text, variant, size }) {
          const btn = document.createElement("button");
          btn.className = "preview-button preview-component";
          btn.classList.add(variant || "primary");
          btn.classList.add("size-" + (size || "medium"));
          btn.textContent = text || "Text";
          return btn;
        }

        function createCard({ title, body }) {
          const card = document.createElement("div");
          card.className = "preview-card preview-component";
          const h = document.createElement("h3");
          h.textContent = title || "Text";
          const p = document.createElement("p");
          p.textContent = body || "Example content";
          card.appendChild(h);
          card.appendChild(p);
          return card;
        }

        function createHeader({ text }) {
          const header = document.createElement("header");
          header.className = "preview-header preview-component";
          header.textContent = text || "Text";
          return header;
        }

        function createNav() {
          const ul = document.createElement("ul");
          ul.className = "preview-nav preview-component";
          ["Home", "About", "Contact"].forEach((label) => {
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.href = "#";
            a.textContent = label;
            li.appendChild(a);
            ul.appendChild(li);
          });
          return ul;
        }

        // --- Render ---
        function renderFromState() {
          // Update controls
          compSelect.value = state.component;
          compVariant.value = state.variant;
          compSize.value = state.size;
          propText.value = state.text;
          propFontSize.value = state.fontSize;
          propPadding.value = state.padding;
          propRadius.value = state.radius;
          propFontFamily.value = state.fontFamily;
          propBgColor.value = state.bgColor;
          propTextColor.value = state.textColor;

          tokenPrimary.value = state.tokens.primary;
          tokenSecondary.value = state.tokens.secondary;
          tokenText.value = state.tokens.text;
          tokenBg.value = state.tokens.bg;
          tokenRadius.value = state.tokens.radius;
          tokenSpacingSmall.value = state.tokens.spacingSmall;
          tokenSpacingMedium.value = state.tokens.spacingMedium;
          tokenSpacingLarge.value = state.tokens.spacingLarge;

          fontSizeValue.textContent = px(state.fontSize);
          paddingValue.textContent = px(state.padding);
          radiusValue.textContent = px(state.radius);
          tokenRadiusValue.textContent = px(state.tokens.radius);
          tokenSpacingSmallValue.textContent = px(state.tokens.spacingSmall);
          tokenSpacingMediumValue.textContent = px(state.tokens.spacingMedium);
          tokenSpacingLargeValue.textContent = px(state.tokens.spacingLarge);

          // Apply tokens
          setRootVar("--color-primary", state.tokens.primary);
          setRootVar("--color-secondary", state.tokens.secondary);
          setRootVar("--color-text", state.tokens.text);
          setRootVar("--color-bg", state.tokens.bg);
          setRootVar("--border-radius", px(state.tokens.radius));
          setRootVar("--spacing-small", px(state.tokens.spacingSmall));
          setRootVar("--spacing-medium", px(state.tokens.spacingMedium));
          setRootVar("--spacing-large", px(state.tokens.spacingLarge));

          // Render component
          previewArea.innerHTML = "";
          let el;
          switch (state.component) {
            case "button":
              el = createButton({
                text: state.text,
                variant: state.variant,
                size: state.size,
              });
              break;
            case "card":
              el = createCard({
                title: state.text,
                body: "Example content",
              });
              break;
            case "header":
              el = createHeader({ text: state.text });
              break;
            case "navigation":
              el = createNav();
              break;
            default:
              el = document.createElement("div");
          }

          el.style.fontSize = px(state.fontSize);
          el.style.padding = px(state.padding);
          el.style.borderRadius = px(state.radius);
          el.style.fontFamily = state.fontFamily;
          el.style.background = state.bgColor;
          el.style.color = state.textColor;

          previewArea.appendChild(el);
        }

        // --- Control listeners ---
        function attachListeners() {
          // Component selectors
          [compSelect, compVariant, compSize].forEach((c) => {
            c.addEventListener("change", () => {
              pushSnapshot();
              state.component = compSelect.value;
              state.variant = compVariant.value;
              state.size = compSize.value;
              renderFromState();
            });
          });

          // Properties
          [
            [propText, "text"],
            [propFontSize, "fontSize"],
            [propPadding, "padding"],
            [propRadius, "radius"],
            [propFontFamily, "fontFamily"],
            [propBgColor, "bgColor"],
            [propTextColor, "textColor"],
          ].forEach(([el, key]) => {
            const event = key === "fontFamily" ? "change" : "input";
            el.addEventListener(event, () => {
              pushSnapshot();
              state[key] = key.includes("Color")
                ? el.value
                : el.value || el.valueAsNumber || el.value;
              renderFromState();
            });
          });

          // Design tokens
          [
            [tokenPrimary, "primary"],
            [tokenSecondary, "secondary"],
            [tokenText, "text"],
            [tokenBg, "bg"],
            [tokenRadius, "radius"],
            [tokenSpacingSmall, "spacingSmall"],
            [tokenSpacingMedium, "spacingMedium"],
            [tokenSpacingLarge, "spacingLarge"],
          ].forEach(([el, key]) => {
            el.addEventListener("input", () => {
              pushSnapshot();
              state.tokens[key] =
                key.includes("radius") || key.includes("spacing")
                  ? Number(el.value)
                  : el.value;
              renderFromState();
            });
          });

          // Undo/Redo
          if (undoBtn) undoBtn.addEventListener("click", undo);
          if (redoBtn) redoBtn.addEventListener("click", redo);

          // Reset
          if (resetBtn)
            resetBtn.addEventListener("click", () => {
              pushSnapshot();
              state = {
                component: "button",
                variant: "primary",
                size: "medium",
                text: "",
                fontSize: 16,
                padding: 10,
                radius: 8,
                fontFamily: "system-ui",
                bgColor: "#4a78ff",
                textColor: "#ffffff",
                tokens: {
                  primary: "#4a78ff",
                  secondary: "#335bef",
                  text: "#222222",
                  bg: "#ffffff",
                  radius: 8,
                  spacingSmall: 8,
                  spacingMedium: 16,
                  spacingLarge: 24,
                },
              };
              renderFromState();
            });

          // Export buttons
          if (exportCSSBtn)
            exportCSSBtn.addEventListener("click", () => {
              const css = `
:root {
  --color-primary: ${state.tokens.primary};
  --color-secondary: ${state.tokens.secondary};
  --color-text: ${state.tokens.text};
  --color-bg: ${state.tokens.bg};
  --border-radius: ${state.tokens.radius}px;
  --spacing-small: ${state.tokens.spacingSmall}px;
  --spacing-medium: ${state.tokens.spacingMedium}px;
  --spacing-large: ${state.tokens.spacingLarge}px;
}`;
              navigator.clipboard
                .writeText(css)
                .then(() => alert("CSS copied!"));
            });

          if (exportJSONBtn)
            exportJSONBtn.addEventListener("click", () => {
              navigator.clipboard
                .writeText(JSON.stringify(state, null, 2))
                .then(() => alert("JSON copied!"));
            });
        }

        // --- Initialize ---
        function init() {
          pushSnapshot(); // initial state
          attachListeners();
          renderFromState();
        }

        init();
      })();
    </script>
  </body>
</html>
